# Development configuration for Lunaris Civitas simulation
#
# TIME MODEL:
#   - 1 tick = 1 hour
#   - Resources have replenishment_frequency (natural replenishment timing)
#   - Production/consumption systems have per-resource frequencies (natural production/decay timing)
#   - Rates are per frequency period (e.g., if frequency is 'monthly', rate is per month)
#   - These represent baseline natural processes; future systems (humans, jobs) will add additional consumption/production

simulation:
  start_datetime: "2024-01-01T00:00:00"
  rng_seed: RANDOM # or a specific seed number
  log_level: INFO

logging:
  # Configurable logging for world state and system metrics
  # frequency: 'hourly', 'daily', 'weekly', 'monthly', or 'yearly'
  # rate: Log every N periods (e.g., rate=2 means every 2 weeks)
  
  world_state:
    enabled: true
    frequency: monthly  # Log world state every week with change summaries
    rate: 1  # Every 1 week
  
  systems:
    enabled: false  # System metrics disabled - systems don't change frequently enough
    frequency: monthly
    rate: 2

resources:
  # Resource definitions
  # replenishment_frequency: 'hourly', 'daily', 'weekly', 'monthly', or 'yearly'
  # Controls natural replenishment timing (rain, growth, etc.)
  
  - id: food
    name: Food
    initial_amount: 1000.0
    max_capacity: 10000.0
    replenishment_rate: 50.0  # per replenishment_frequency period
    finite: false
    replenishment_frequency: hourly  # Natural replenishment hourly (e.g., growth)
  
  - id: water
    name: Water
    initial_amount: 2000.0
    max_capacity: 5000.0
    replenishment_rate: 100.0  # per replenishment_frequency period
    finite: false
    replenishment_frequency: hourly  # Natural replenishment hourly (e.g., rain, rivers)
  
  - id: oil
    name: Oil
    initial_amount: 500.0
    finite: true  # Finite resources cannot replenish (no replenishment_frequency needed)
  
  - id: electricity
    name: Electricity
    initial_amount: 5000.0
    max_capacity: 10000.0
    replenishment_rate: 200.0  # per replenishment_frequency period
    finite: false
    replenishment_frequency: hourly  # Natural replenishment hourly (e.g., solar, wind)

systems:
  - ResourceProductionSystem
  - ResourceConsumptionSystem
  - ResourceReplenishmentSystem
  - ResourceHistorySystem
  - EntityHistorySystem
  - WorldHealthSystem
  - HumanSpawnSystem
  - NeedsSystem
  - RequirementResolver
  - HumanNeedsFulfillmentSystem
  - HealthSystem
  - DeathSystem

systems_config:
  ResourceProductionSystem:
    # Natural/baseline production rates
    # Format: resource_id: rate (hourly default) or {rate: X, frequency: 'Y'}
    # These represent natural production processes (e.g., plant growth, solar generation)
    production:
      food: 100.0      # produces 100 food per hour (default: hourly)
      water: 150.0    # produces 150 water per hour (default: hourly)
      electricity: 300.0  # produces 300 electricity per hour (default: hourly)
      # Example with custom frequency:
      # wood:
      #   rate: 50.0
      #   frequency: daily  # produces 50 wood per day
  
  ResourceConsumptionSystem:
    # Natural/baseline consumption rates (decay, evaporation, etc.)
    # Format: resource_id: rate (hourly default) or {rate: X, frequency: 'Y'}
    # These represent natural consumption processes (e.g., evaporation, spoilage)
    consumption:
      food: 80.0      # consumes 80 food per hour (default: hourly) - natural spoilage
      water: 120.0    # consumes 120 water per hour (default: hourly) - evaporation
      oil:
        rate: 10.0
        frequency: monthly  # consumes 10 oil per month - natural degradation
      electricity: 250.0  # consumes 250 electricity per hour (default: hourly) - natural loss
  
  ResourceHistorySystem:
    # Resource history tracking for analytics
    # frequency: 'hourly', 'daily', 'weekly', 'monthly', or 'yearly'
    # rate: Save every N periods (e.g., rate=2 means every 2 days)
    # resources: [] = all resources, or list specific resource IDs
    enabled: true
    frequency: daily  # Save history daily at midnight
    rate: 1  # Every 1 day
    resources: []  # Empty = track all resources
  
  EntityHistorySystem:
    # Entity history tracking for analytics
    # frequency: 'hourly', 'daily', 'weekly', 'monthly', or 'yearly'
    # rate: Save every N periods (e.g., rate=2 means every 2 days)
    # component_types: [] = track all components, or list specific component types
    enabled: true
    frequency: daily  # Save history daily at midnight
    rate: 1  # Every 1 day
    component_types: []  # Empty = track all components
  
  WorldHealthSystem:
    # World health tracking - composite score from entities, resources, population, needs
    # frequency: 'hourly', 'daily', 'weekly', 'monthly', or 'yearly'
    # rate: Calculate every N periods
    # weights: Component weights for composite score (should sum to ~1.0)
    enabled: true
    frequency: daily  # Calculate health daily at midnight
    rate: 1  # Every 1 day
    max_history: 10  # Keep last N health values for trend calculation
    weights:
      entity_health: 0.4      # Average entity health (40%)
      resource_health: 0.3    # Resource status levels (30%)
      population_trend: 0.2    # Population growth/decline (20%)
      needs_fulfillment: 0.1  # Needs fulfillment rates (10%)
  
  HumanSpawnSystem:
    # Human spawn system for initial population and runtime spawning
    # NOTE: Runtime spawning is a TEMPORARY PLACEHOLDER for Phase 3 reproduction system
    enabled: true
    initial_population: 100
    spawn_frequency: daily  # hourly, daily, weekly, monthly, yearly
    spawn_rate: 10  # 0 = disabled, N = spawn N entities per period
    seed_crew:
      age_range: [18, 65]  # Years for initial population
      components:
        Needs: 100  # All get Needs (percentage)
        Health: 100
        Age: 100
        Pressure: 50  # 50% get Pressure
        Inventory: 30
        Wealth: 20
    runtime_spawn:
      # Runtime births always use current simulation date (age = 0)
      # Age component is always created automatically at age 0
      components:
        Needs: 100
        Health: 100
        Pressure: 0  # Newborns start without pressure
  
  NeedsSystem:
    # Needs decay system with randomized per-entity rates (individual metabolism)
    enabled: true
    frequency: hourly  # Always hourly for needs decay
    base_hunger_rate: 0.01  # Per hour, base rate
    hunger_rate_variance: 0.005  # Â±variance for randomization
    base_thirst_rate: 0.015
    thirst_rate_variance: 0.005
    base_rest_rate: 0.005
    rest_rate_variance: 0.002
  
  RequirementResolver:
    # Requirement resolver system for fulfilling resource needs
    # In Phase 2, uses fallback to consume directly from world resources
    # In later phases, will use configured sources (inventory, market, etc.)
    enabled: true
    # requirement_sources: {}  # No sources configured - uses world fallback
  
  HumanNeedsFulfillmentSystem:
    # Active need fulfillment through RequirementResolverSystem
    enabled: true
    frequency: hourly  # Check and fulfill needs hourly
    satisfaction_ranges:
      food:
        hunger_restore_min: 0.05  # Per unit of food (randomized per call)
        hunger_restore_max: 0.15
      water:
        thirst_restore_min: 0.10  # Per unit of water (randomized per call)
        thirst_restore_max: 0.30
      rest:
        rest_restore_min: 0.05  # Per hour of rest (randomized per call)
        rest_restore_max: 0.15
  
  HealthSystem:
    # Health degradation from pressure and unmet needs
    enabled: true
    frequency: hourly  # Health updates hourly
    pressure_damage:
      min_per_tick: 0.001  # At pressure_level = 1.0 (randomized per tick)
      max_per_tick: 0.005
    unmet_needs_damage:
      hunger:
        min_per_tick: 0.0005  # At hunger = 1.0 (randomized per tick)
        max_per_tick: 0.002
      thirst:
        min_per_tick: 0.001
        max_per_tick: 0.003
      rest:
        min_per_tick: 0.0002
        max_per_tick: 0.001
    healing_rate:
      min_per_tick: 0.0001  # When needs met (randomized per tick)
      max_per_tick: 0.0005
  
  DeathSystem:
    # Death from health degradation and age-based mortality
    enabled: true
    frequency: hourly  # Check for death hourly
    age_mortality:
      old_age_start: 70  # Years - mortality starts increasing here
      old_age_death_chance_min: 0.00001  # Per hour at old_age_start (randomized)
      old_age_death_chance_max: 0.0001  # Per hour at old_age_start (randomized)
      peak_mortality_age: 85  # Age where most deaths occur (73-100 range)
      chance_increase_per_year: 0.00001  # Base increase per year past old_age_start
      chance_multiplier_per_year: 1.1  # Exponential multiplier after peak_mortality_age
      # No max_age - outliers can survive past 100 (very rare)
